# Домашнее задание к занятию «Введение в Terraform»

------

### Чек-лист готовности к домашнему заданию

<img width="825" height="164" alt="image" src="https://github.com/user-attachments/assets/0a69cf82-cf96-42ca-8804-6c550029c753" />

------

### Задание 1

1.
 <img width="673" height="483" alt="image" src="https://github.com/user-attachments/assets/faeccaa6-81eb-4835-a451-965c47e8c636" />

2. Согласно этому .gitignore, допустимо сохранить личную, секретную информацию в personal.auto.tfvars
3.
 <img width="1064" height="58" alt="image" src="https://github.com/user-attachments/assets/c55a42e1-2f34-4b31-89de-ae19a849f0c1" />

4.
<img width="885" height="265" alt="image" src="https://github.com/user-attachments/assets/2cde9d5d-d691-46bd-a05c-cc49abbcfd52" />

Первая ошибка так и описана,что не хватает 2го аргумента. Терраформ не понимает тип ли это или имя. Вторая ошибка тоже очевидна - имя не может начинаться с цифры.

<img width="813" height="136" alt="image" src="https://github.com/user-attachments/assets/d3eea7d5-9a33-45e6-a04c-ad484c6702bb" />

При повторной проверке вылезла новая ошибка. Убрать _FAKE -так как это меняет имя ресурса,а такого ресурса нет,и опечатку в слове resulT

5. 
<img width="1094" height="649" alt="image" src="https://github.com/user-attachments/assets/bf0c6a1f-f3b3-45e0-86f8-b960b357df96" />

6.
<img width="1029" height="172" alt="image" src="https://github.com/user-attachments/assets/56c8e0e6-30f3-4734-81ef-21d8422e7f9b" />

Может быть опасность применения ключа  ```-auto-approve``` в отсутствии контроля,ведь он дословно переводится как "автоматически соглашаться". Этот ключ можно применять только в тестовой или учебной среде или же после проверки плана. Ну или если уверены в себе на 100 процентов. Удобен тем,что не надо каждый раз подтверждать изменения.
7. 
<img width="701" height="172" alt="image" src="https://github.com/user-attachments/assets/9b1d9458-3784-4e83-bdde-91269698de0e" />

8. Объясните, почему при этом не был удалён docker-образ **nginx:latest**. Ответ **ОБЯЗАТЕЛЬНО НАЙДИТЕ В ПРЕДОСТАВЛЕННОМ КОДЕ**, а затем **ОБЯЗАТЕЛЬНО ПОДКРЕПИТЕ** строчкой из документации [**terraform провайдера docker**](https://library.tf/providers/kreuzwerker/docker/latest).  (ищите в классификаторе resource docker_image )


------

## Дополнительное задание (со звёздочкой*)

**Настоятельно рекомендуем выполнять все задания со звёздочкой.** Они помогут глубже разобраться в материале.   
Задания со звёздочкой дополнительные, не обязательные к выполнению и никак не повлияют на получение вами зачёта по этому домашнему заданию. 

### Задание 2*

1. Создайте в облаке ВМ. Сделайте это через web-консоль, чтобы не слить по незнанию токен от облака в github(это тема следующей лекции). Если хотите - попробуйте сделать это через terraform, прочитав документацию yandex cloud. Используйте файл ```personal.auto.tfvars``` и гитигнор или иной, безопасный способ передачи токена!
2. Подключитесь к ВМ по ssh и установите стек docker.
3. Найдите в документации docker provider способ настроить подключение terraform на вашей рабочей станции к remote docker context вашей ВМ через ssh.
4. Используя terraform и  remote docker context, скачайте и запустите на вашей ВМ контейнер ```mysql:8``` на порту ```127.0.0.1:3306```, передайте ENV-переменные. Сгенерируйте разные пароли через random_password и передайте их в контейнер, используя интерполяцию из примера с nginx.(```name  = "example_${random_password.random_string.result}"```  , двойные кавычки и фигурные скобки обязательны!) 
```
    environment:
      - "MYSQL_ROOT_PASSWORD=${...}"
      - MYSQL_DATABASE=wordpress
      - MYSQL_USER=wordpress
      - "MYSQL_PASSWORD=${...}"
      - MYSQL_ROOT_HOST="%"
```

6. Зайдите на вашу ВМ , подключитесь к контейнеру и проверьте наличие секретных env-переменных с помощью команды ```env```. Запишите ваш финальный код в репозиторий.

### Задание 3*
1. Установите [opentofu](https://opentofu.org/)(fork terraform с лицензией Mozilla Public License, version 2.0) любой версии
2. Попробуйте выполнить тот же код с помощью ```tofu apply```, а не terraform apply.
------

### Правила приёма работы

Домашняя работа оформляется в отдельном GitHub-репозитории в файле README.md.   
Выполненное домашнее задание пришлите ссылкой на .md-файл в вашем репозитории.

### Критерии оценки

Зачёт ставится, если:

* выполнены все задания,
* ответы даны в развёрнутой форме,
* приложены соответствующие скриншоты и файлы проекта,
* в выполненных заданиях нет противоречий и нарушения логики.

На доработку работу отправят, если:

* задание выполнено частично или не выполнено вообще,
* в логике выполнения заданий есть противоречия и существенные недостатки. 

